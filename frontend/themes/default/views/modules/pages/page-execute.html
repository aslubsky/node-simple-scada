<breadcrumbs>
    <crumb href="'/'" title="'Мой кабинет'|translate" />
    <crumb href="'/courses/my'" title="'Мои Курсы'|translate" />
    <crumb href="'/courses/execute/'+task.parent.id" title="task.parent.title"/>
    <crumb title="task.title"/>
</breadcrumbs>

<div id="perspective" perspective="showMenu">

<div class="padded col col-sm-12 course-container" ng-class="{'col-lg-9 col-md-9': task && task.parent_id || testing, 'col-lg-12 col-md-12': !(task && task.parent_id || testing)}" ng-click="showMenu = !showMenu" bz-loading-container="loading">
    <div ng-if="errors">
        <div class="alert alert-danger" ng-if="errors.not_assign">{{'Это задание Вам не назначено'|translate}}</div>
        <div class="alert alert-danger" ng-if="errors.not_found">{{errors.not_found}}</div>
    </div>

    <div class="page-header">
        <div class="table-actions">
            <a ng-if="canEdit" href="/pages/{{data.id}}/edit/" class="btn btn-success btn-sm">
                <i class="fa fa-pencil"></i> {{'Редактировать'|translate}}
            </a>
        </div>
        <h1>{{data.title}}</h1>
        <h6 ng-if="task.parent"><strong>{{'Курс'|translate}}:</strong>  {{task.parent.element.title}}</h6>
        <h6 ng-if="task.parent && (task.parent.element.title != task.parent.title)"><strong>{{'Задание'|translate}}:</strong> {{task.parent.title}} </h6>
    </div>

    <div class="main-content">
        <!--span ng-if="task && task.status == 'finished'"> {{task.mark}}% <i class="green fa fa-check"></i></span-->

        <div >
            <div ng-if="data.type == 'page'" ng-include="'/themes/default/views/modules/pages/page-page.html'"></div>
            <div ng-if="data.type == 'file'" ng-include="'/themes/default/views/modules/pages/page-file.html'"></div>
            <div class="fullscreen" ng-if="data.type == 'url'" ng-include="'/themes/default/views/modules/pages/page-url.html'"></div>
            <div class="fullscreen" ng-if="data.type == 'html'" ng-include="'/themes/default/views/modules/pages/page-html.html'"></div>
        </div>
    <div ng-show="data" class="row finish-reading" ng-if="!testing && task.parent_id">
        <div class="padded">
            <button ng-click="markAsComplete()" class="btn btn-success">

                <span ng-if="data.title === task.plan[task.plan.length - 1].title">{{'Завершить'|translate}}</span>
                <span ng-if="data.title != task.plan[task.plan.length - 1].title && task.plan[task.plan.length - 1]">{{'Далее'|translate}}</span>

            <i class="fa fa-arrow-right"></i></button>

        </div>
    </div>
    </div>
</div>

<div class="col col-lg-3 col-md-3 col-xs-3 col-sm-3 course-sidebar sidebar-right    outer-nav left vertical">
    <a ng-if="task && task.parent_id" class="btn btn-info btn-block btn-lg" href="/courses/materials/{{task.parent_id}}">
        {{'Материалы курса'|translate}}
    </a>
    <br/>
    <div ng-if="task && task.parent_id || testing">
        <div ng-include="'/themes/default/views/block/course-plan.html'"></div>
    </div>
</div>


</div>