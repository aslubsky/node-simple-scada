<breadcrumbs>
    <crumb href="'/'" title="'Мой кабинет'|translate"/>
    <crumb href="'/study-resources'" title="'Учебные ресурсы'|translate" />
    <crumb title="'Ресурсы'|translate"/>
</breadcrumbs>

<div class="col-lg-9 col-md-8 col-sm-12" bz-loading-container="loading">
    <div class="page-header">
        <div class="table-actions">
            <a href="/pages/create" class="btn btn-success btn-sm"><i class="fa fa-plus"></i>
                {{'Создать'|translate}}</a>
            <a ng-show="checkboxes.checkedAny" bz-confirm="deleteChecked(checkboxes.items)" message="'Удалить?'"
               title="{{'Удалить'|translate}}" class="btn btn-danger btn-sm"><i class="fa fa-trash-o"></i>
                {{'Удалить'|translate}}</a>
        </div>

        <h1>{{'Ресурсы'|translate}}
            <small>{{title}}</small>
        </h1>
    </div>

    <div class="main-content">
        <table ng-table="tableParams" show-filter="true"
               class="table ng-table-responsive table-striped table-condensed table-hover">
            <tbody>
            <tr ng-repeat="item in data">

                <td width="20" style="text-align: left;"
                    header="'/themes/default/views/block/ng-table/headers/checkbox.html'">
                    <input type="checkbox" ng-model="checkboxes.items[item.id]"/>
                </td>

                <td class="table-preview" filter="{ 'title': 'text' }" data-title="'Название' | translate" sortable="'title'">
                    <span class="preview img-circle">
                    <span get-file-icon="item"></span>
                    </span>

                    <a class="name" ng-if="item.open_in_window && item.type == 'url'" href="{{item.url}}" target="_blank">{{item.title}}</a>
                    <a class="name" ng-if="item.open_in_window && item.type == 'html'" href="{{item.files[0].url}}/{{item.files[0].index_page}}" target="_blank">{{item.title}}</a>
                    <a class="name" ng-if="!item.open_in_window && item.type == 'html' || !item.open_in_window && item.type == 'url'" href="/pages/{{item.id}}/view">{{item.title}}</a>
                    <a class="name" ng-if="item.type != 'url' && item.type != 'html'" href="/pages/{{item.id}}/view">{{item.title}}</a>
                    <div class="subtext">{{item.description}}</div>
                </td>

                <td class="text-center" filter="{ 'type': 'select' }" filter-data="filterTypes($column)"
                    data-title="'Тип' | translate" sortable="'type'">
                    <span ng-if="item.type == 'page'">{{'Страница'|translate}}</span>
                    <span ng-if="item.type == 'file'">{{'Файл'|translate}}</span>
                    <span ng-if="item.type == 'url'">{{'Ссылка'|translate}}</span>
                    <span ng-if="item.type == 'html'">{{'HTML-сайт'|translate}}</span>
                </td>

                <!--<td sortable="created_at" width="140"-->
                <!--filter="{ 'created_at': 'date', 'templateURL': '/themes/default/views/block/ng-table/filters/date.html' }"-->
                <!--data-title="'Дата создания'| translate" class="text-center table-date-column">-->
                <!--{{item.created_at|date:'yyyy-MM-dd'}}<br/>-->
                <!--{{item.created_at|date:'HH:mm:ss'}}-->
                <!--</td>-->

                <td sortable="'is_published'" width="110" data-title="'Опубликовано' | translate"
                    filter="{ 'is_published': 'select' }" filter-data="isPublished($column)"
                    class="text-center">
                    <input ng-change="togglePublished(item)" type="checkbox" ng-model="item.is_published">
                </td>

                <td class="text-center" filter="{ 'tags': 'text' }"
                    data-title="'Метки' | translate" sortable="'tags'">
                    <span class="label label-default arrowed arrow-left ng-binding">{{item.tags}}</span>
                </td>



                <td width="95" data-title="'Действия' | translate" class="actions"
                    filter="{ 'clear': 'clear', 'templateURL': '/themes/default/views/block/ng-table/filters/clear.html' }">

                        <a href="/pages/{{item.id}}/edit"
                           title="{{'Редактировать'|translate}}"><span class="fa fa-pencil"></span></a>
                        <a href="" bz-confirm="remove(item)" message="'Удалить?'"
                           title="{{'Удалить'|translate}}"><span class="fa fa-times text-danger"></span></a>

                        <!--<a href="/pages/{{item.id}}/edit" class="btn btn-sm ">{{'Редактировать'|translate}}</a>-->

                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="col-lg-3 col-md-4 col-sm-12">
    <div class="pull-right">
        <a ng-if="category_id" class="btn btn-sm btn-info" ng-click="filterByCategory()" href="">{{ 'Сброс'}}</a>
    </div>
    <h1>{{ 'Категории'|translate }}</h1>

    <div class="main-content" ng-include="'/themes/default/views/modules/pages/page-categories-tree.html'"></div>
</div>