<breadcrumbs>
    <crumb href="'/'" title="'Мой кабинет'|translate"/>
    <crumb title="'Задания'|translate"/>
</breadcrumbs>


<div class="padded">
    <div class="page-header">
        <div class="table-actions">
            <a href="/tasks/create" class="btn btn-success btn-sm"><i class="fa fa-plus"></i>
                {{'Создать'|translate}}</a>
            <a ng-show="checkboxes.checkedAny" bz-confirm="deleteChecked(checkboxes.items)" message="'Удалить?'"
               title="{{'Удалить'|translate}}" class="btn btn-danger btn-sm"><i class="fa fa-trash-o"></i>
                {{'Удалить'|translate}}</a>
        </div>
        <h1>{{'Задания'|translate}}</h1>
    </div>
    <div class="main-content" bz-loading-container="loading">
        <table ng-table="tableParams" show-filter="true"
               class="table ng-table-responsive table-striped table-condensed table-hover table-tasks">
            <tr ng-repeat="task in tasks">

                <td width="20" style="text-align: left;"
                    header="'/themes/default/views/block/ng-table/headers/checkbox.html'">
                    <input type="checkbox" ng-model="checkboxes.items[task.id]"/>
                </td>

                <td class="table-preview" data-title="'Название'|translate" filter="{ 'title': 'text' }"
                    sortable="'title'">
                        <span ng-if="task.type == 'test' ">
                            <span class="preview img-circle">
                                <i class="fa fa-check-square-o"></i>
                            </span>
                            <a class="name" href="/tests/execute/{{task.id}}?mode=testing&testId={{task.element_id}}"
                               title="{{'Пройти тест'|translate}}">
                                {{task.title}}
                            </a>
                        </span>
                        <span ng-if="task.type == 'resource'">
                            <span class="preview img-circle">
                                <i get-file-icon="task.element"></i>
                            </span>
                            <a class="name" href="/pages/execute/{{task.element_id}}?mode=testing" title="{{'Просмотр'|translate}}">{{task.title}}</a>
                            <span class="subtext">{{task.description}}</span>
                        </span>
                        <span ng-if="task.type == 'course' ">
                            <span ng-class="{'preview img-circle': !task.element.icon_thumb}">
                                <i ng-if="!task.element.icon_thumb" class="fa fa-th-large"></i>
                                <img ng-if="task.element.icon_thumb" class="img-circle" ng-src="{{task.element.icon_thumb}}"/>
                            </span>
                            <a class="name" href="/courses/execute/{{task.id}}?mode=testing"
                               title="{{'Просмотр'|translate}}">{{task.title}}</a>
                        </span>
                </td>

                <td data-title="'Тип'|translate" filter="{ 'type': 'select' }" filter-data="filterTypes($column)" sortable="'type'">
                    <span ng-if="task.type == 'test' ">{{'Тест'|translate}}</span>
                    <span ng-if="task.type == 'resource' ">{{'Ресурс'|translate}}</span>
                    <span ng-if="task.type == 'course' ">{{'Курс'|translate}}</span>
                </td>

                <td data-title="'Дата создания'|translate" class="text-center"
                    filter="{ 'created_at': 'date', 'templateURL': '/themes/default/views/block/ng-table/filters/date.html' }"
                    sortable="'created_at'">
                    {{task.created_at | date:'yyyy-MM-dd'}}
                </td>

                <td width="125" data-title="'Действия'|translate" class="actions"
                    filter="{ 'clear': 'clear', 'templateURL': '/themes/default/views/block/ng-table/filters/clear.html' }">

                    <a href="/tasks/edit/{{task.id}}" title="{{'Редактировать'|translate}}"><span
                            class="fa fa-pencil"></span></a>
                    <!--<a class="btn btn-sm btn-default" href="tasks/{{task.id}}/params" title="{{'Параметры'|translate}}"><span class="fa fa-cog"></span></a>-->
                    <a href="/tasks/{{task.id}}/assign" title="{{'Назначить'|translate}}"><span
                            class="fa fa-users"></span></a>
                    <a href="" bz-confirm="remove(task)" message="'Удалить?'" title="{{'Удалить'|translate}}"><span
                            class="fa fa-times text-danger"></span></a>

                </td>

            </tr>
        </table>
    </div>
</div>