<breadcrumbs>
    <crumb href="'/'" title="'Мой кабинет'|translate" />
    <crumb href="'/study-resources'" title="'Учебные ресурсы'|translate"/>
    <crumb href="'/courses'" title="'Курсы'|translate"/>
    <crumb href="'/courses/' + course.id + '/view'" title="course.title"/>
    <crumb title="'План'|translate"/>
</breadcrumbs>


<div class="padded">
    <div class="page-header">
        <div class="pull-right">

        </div>
        <h1>{{'План курса'|translate}}</h1>
        <h6><strong>{{'Курс'|translate}}:</strong> {{course.title}}</h6>
    </div>
    <div class="main-content" bz-loading-container="loading">
        <div class="row form-horizontal">
            <div class="col-xs-6">
                <div class="form-group">
                    <label for="materials" class="col-sm-2 control-label">{{'Материалы'|translate}}</label>

                    <div class="col-sm-10">
                        <select class="form-control" id="materials" ng-model="materials">
                            <option value="all">{{'Все'|translate}}</option>
                            <option value="selected">{{'Материалы курса'|translate}}</option>
                        </select>
                    </div>
                </div>

                <div class="form-group" ng-show="materials == 'all'">
                    <label for="type" class="col-sm-2 control-label">{{'Тип'|translate}}</label>

                    <div class="col-sm-10">
                        <select class="form-control" id="type" ng-model="type">
                            <option value="test">{{'Тест'|translate}}</option>
                            <option value="page">{{'Страница'|translate}}</option>
                            <option value="file">{{'Файл'|translate}}</option>
                            <option value="url">{{'Ссылка'|translate}}</option>
                            <option value="html">{{'HTML-сайт'|translate}}</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="search" class="col-sm-2 control-label">{{'Поиск'|translate}}</label>

                    <div class="col-sm-10">
                        <input type="text" class="form-control" ng-model="search" id="search">
                    </div>
                </div>

                <div class="form-group">
                    <label for="search" class="col-sm-2 control-label">{{'Метки'|translate}}</label>

                    <div class="col-sm-10">
                        <input type="text" class="form-control" ng-model="searchByTags" id="searchByTags">
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-xs-6">
                <div bz-loading-container="loading">
                    <table ng-if="materials == 'all'" class="table table-striped">
                        <tr ng-repeat="item in data">
                            <td>
                            <span ng-if="item.type == 'test'">
                                {{item.title}}
                                <span class="fa fa-check-square-o"></span>
                                 <span ng-if="item.code" class="label label-default">{{item.code}}</span>
                            <div ng-if="item.description">{{item.description}}</div>
                            </span>
                            <span ng-if="item.type == 'page'">
                                 <a href="/pages/{{item.element_id}}/view" target="_blank">{{item.title}}</a>
                                <span class="fa fa-file-text-o"></span>
                                 <span ng-if="item.code" class="label label-default">{{item.code}}</span>
                            <div ng-if="item.description">{{item.description}}</div>
                            </span>
                            <span ng-if="item.type == 'file'">
                                <a href="/pages/{{item.element_id}}/view" target="_blank">{{item.title}}</a>
                                <span class="fa fa-file"></span>
                                 <span ng-if="item.code" class="label label-default">{{item.code}}</span>
                            <div ng-if="item.description">{{item.description}}</div>
                            </span>

                            <span ng-if="item.type == 'url'">
                                <a href="/pages/{{item.element_id}}/view" target="_blank">{{item.title}}</a>
                                <span lass="fa fa-link "></span>
                                 <span ng-if="item.code" class="label label-default">{{item.code}}</span>
                            <div ng-if="item.description">{{item.description}}</div>
                            </span>

                            <span ng-if="item.type == 'html'">
                                <a href="/pages/{{item.element_id}}/view" target="_blank">{{item.title}}</a>
                                <span lass="fa fa-files-o "></span>
                                 <span ng-if="item.code" class="label label-default">{{item.code}}</span>
                            <div ng-if="item.description">{{item.description}}</div>
                            </span>
                            </td>
                            <td width="95" class="text-center">
                                <div class="btn-group">
                                    <a class="btn btn-sm btn-default" ng-click="add(item)"
                                       title="{{'Добавить'|translate}}">
                                        <span class="fa fa-arrow-right"></span></a>
                                </div>
                            </td>

                        </tr>
                    </table>

                    <table ng-if="materials == 'selected'" class="table table-striped">
                        <tr ng-repeat="el in elements">
                            <td>
                            <span ng-if="el.sub_type == 'test'">
                                {{el.title}}
                                <span class="fa fa-check-square-o"></span>
                                 <span ng-if="el.code" class="label label-default">{{el.code}}</span>
                            <div ng-if="el.description">{{el.description}}</div>
                            </span>
                            <span ng-if="el.sub_type == 'page'">
                                 <a href="/pages/{{el.element_id}}/view" target="_blank">{{el.title}}</a>
                                <span class="fa fa-file-text-o"></span>
                                 <span ng-if="el.code" class="label label-default">{{el.code}}</span>
                            <div ng-if="el.description">{{el.description}}</div>
                            </span>
                            <span ng-if="el.sub_type == 'file'">
                                <a href="/pages/{{el.element_id}}/view" target="_blank">{{el.title}}</a>
                                <span class="fa fa-file"></span>
                                 <span ng-if="el.code" class="label label-default">{{el.code}}</span>
                            <div ng-if="el.description">{{el.description}}</div>
                            </span>

                            <span ng-if="el.sub_type == 'url'">
                                <a href="/pages/{{el.element_id}}/view" target="_blank">{{el.title}}</a>
                                <span lass="fa fa-link "></span>
                                 <span ng-if="el.code" class="label label-default">{{el.code}}</span>
                            <div ng-if="el.description">{{el.description}}</div>
                            </span>

                            <span ng-if="el.sub_type == 'html'">
                                <a href="/pages/{{el.element_id}}/view" target="_blank">{{el.title}}</a>
                                <span lass="fa fa-files-o "></span>
                                 <span ng-if="el.code" class="label label-default">{{el.code}}</span>
                            <div ng-if="el.description">{{el.description}}</div>
                            </span>
                            </td>
                            <td width="95" class="text-center">
                                <div class="btn-group">
                                    <a class="btn btn-sm btn-default" ng-click="add(el)"
                                       title="{{'Добавить'|translate}}">
                                        <span class="fa fa-arrow-right"></span></a>
                                </div>
                            </td>

                        </tr>
                    </table>


                </div>

            </div>
            <div class="col-xs-6">
                <div bz-loading-container="loading">
                    <table style="margin-top: -36px" class="table table-striped">
                        <thead>
                        <tr>
                            <th></th>
                            <th>{{'Название'|translate}}</th>
                            <th>{{'Стартовый елемент'|translate}}</th>
                            <th>{{'Действия'|translate}}</th>
                        </tr>
                        </thead>
                        <tr ng-repeat="item in plan">

                            <td width="95" class="text-center">
                                <div class="btn-group">
                                    <a class="btn btn-sm btn-default" ng-click="$delete(item)"
                                       title="{{'Удалить'|translate}}">
                                        <span class="fa fa-arrow-left"></span></a>
                                </div>
                            </td>
                            <td>
                             <span ng-if="item.sub_type == 'test'">
                                {{item.title}}
                                <span class="fa fa-check-square-o"></span>
                                 <span ng-if="item.code" class="label label-default">{{item.code}}</span>
                            <div ng-if="item.description">{{item.description}}</div>
                            </span>
                            <span ng-if="item.sub_type == 'page'">
                                 <a href="/pages/{{item.element_id}}/view" target="_blank">{{item.title}}</a>
                                <span class="fa fa-file-text-o"></span>
                                 <span ng-if="item.code" class="label label-default">{{item.code}}</span>
                            <div ng-if="item.description">{{item.description}}</div>
                            </span>
                            <span ng-if="item.sub_type == 'file'">
                                <a href="/pages/{{item.element_id}}/view" target="_blank">{{item.title}}</a>
                                <span class="fa fa-file"></span>
                                 <span ng-if="item.code" class="label label-default">{{item.code}}</span>
                            <div ng-if="item.description">{{item.description}}</div>
                            </span>

                            <span ng-if="item.sub_type == 'url'" c>
                                <a href="/pages/{{item.element_id}}/view" target="_blank">{{item.title}}</a>
                                <span lass="fa fa-link "></span>
                                 <span ng-if="item.code" class="label label-default">{{item.code}}</span>
                            <div ng-if="item.description">{{item.description}}</div>
                            </span>

                            <span ng-if="item.sub_type == 'html'" c>
                                <a href="/pages/{{item.element_id}}/view" target="_blank">{{item.title}}</a>
                                <span lass="fa fa-files-o "></span>
                                 <span ng-if="item.code" class="label label-default">{{item.code}}</span>
                            <div ng-if="item.description">{{item.description}}</div>
                            </span>
                            </td>
                            <td><input type="radio" data-ng-click="changeStartElement(item)"
                                       ng-model="item.start_element" value="{{item.start_element}}"
                                       name="start_element"/></td>

                            <td width="200" class="text-center">
                                <div class="btn-group">
                                    <a ng-if="item.sub_type == 'test'"
                                       href="/courses/{{course.id}}/test/{{item.element_id}}/settings"
                                       class="btn btn-sm btn-default"><span
                                            class="fa fa-cog"></span></a>
                                    <a href="" class="btn btn-sm btn-default" ng-click="up(item)"><span
                                            class="fa fa-arrow-up"></span></a>
                                    <a href="" class="btn btn-sm btn-default" ng-click="down(item)"><span
                                            class="fa fa-arrow-down"></span></a>
                                </div>

                            </td>
                        </tr>
                    </table>

                </div>
            </div>
        </div>
    </div>
</div>


